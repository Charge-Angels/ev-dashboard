<div class="charger-param-component">
  <form class="form" [formGroup]="formGroup">
    <div class="right-actions d-flex flex-row mat-toolbar-row mb-2">
      <button mat-raised-button color="primary" (click)="saveAndApplyChargingProfile()" [disabled]="!this.scheduleTableDataSource || this.scheduleTableDataSource.getContent().length === 0 || !formGroup.dirty">
        <mat-icon>save</mat-icon><span>{{'general.apply' | translate}}</span>
      </button>
      <button mat-raised-button color="primary" (click)="deleteChargingProfile()" [disabled]="chargingProfiles.length === 0 || chargingProfiles.length > 1">
        <mat-icon>delete</mat-icon><span>{{'general.delete' | translate}}</span>
      </button>
      <button mat-raised-button color="primary" (click)="refresh()">
        <mat-icon>refresh</mat-icon><span>{{'general.refresh' | translate}}</span>
      </button>
    </div>
    <div class="row">
      <div class="form-group col-md-4">
        <div class="row">
          <div class="form-group col-md-12 mb-1 m-1">
            <mat-form-field>
              <mat-select [disabled]="!chargingProfiles || chargingProfiles.length <= 1"
                  [formControl]="chargingProfilesControl" placeholder="{{'chargers.smart_charging.charging_profile_limit' | translate}}">
                <mat-option *ngFor="let chargingProfile of chargingProfiles" [value]="chargingProfile">
                  {{'chargers.connector' | translate}} {{chargingProfile.connectorID}} ({{'chargers.smart_charging.stack_level' | translate}} {{chargingProfile.profile.stackLevel}})
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group col-md-12 mb-1">
            <mat-form-field>
              <mat-select [formControl]="profileTypeControl"
                placeholder="{{'chargers.smart_charging.profile_type' | translate}}" required>
                <mat-option *ngFor="let profileType of profileTypeMap" [value]="profileType">
                  {{profileType.description | translate}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group col-md-12 mb-1">
            <mat-form-field>
              <mat-datetimepicker #picker type="datetime" openOnFocus="false" mode="portrait" timeInterval="1">
              </mat-datetimepicker>
              <mat-datetimepicker-toggle matSuffix [for]="picker" matSuffix></mat-datetimepicker-toggle>
              <input matInput placeholder="{{'chargers.smart_charging.start_date' | translate}}" required
                (dateChange)="startDateFilterChanged($event.value.toDate())" [matDatetimepicker]="picker" [value]="startSchedule"
                [formControl]="startDateControl"
                autocomplete="false">
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="text-right col-md-8 chart-position-in-pop-up">
        <app-charging-station-smart-charging-limit-planner-chart #limitChart>
        </app-charging-station-smart-charging-limit-planner-chart>
      </div>
    </div>
    <div class="limit-planner-table-postion">
      <app-table [dataSource]="scheduleTableDataSource"></app-table>
    </div>
  </form>
</div>
