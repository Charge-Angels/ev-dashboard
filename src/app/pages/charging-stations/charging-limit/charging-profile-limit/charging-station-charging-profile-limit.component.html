<div class="charger-param-component">
  <form class="form" [formGroup]="formGroup">
    <div class="form-group">
      <div class="card">
        <div class="card-header card-header-primary card-header-icon">
          <div class="card-icon">
            <mat-icon>schedule</mat-icon>
          </div>
          <h3 class="card-title text-left">
            {{'chargers.smart_charging.planning_energy_limit' | translate: {chargeBoxID: charger.id} }}
          </h3>
          <div *ngIf="chargingProfiles && chargingProfiles.length <= 1" class="right-actions d-flex flex-row mat-toolbar-row pt-3">
            <button mat-raised-button color="primary" (click)="saveAndApplyChargingProfile()" [disabled] = "disableButtons">
              <mat-icon>save</mat-icon><span>{{'general.apply' | translate}}</span>
            </button>
            <button mat-raised-button color="primary" (click)="clearChargingProfile()" [disabled] = "disableButtons">
              <mat-icon>delete</mat-icon><span>{{'general.clear' | translate}}</span>
            </button>
          </div>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="form-group col-md-4">
              <div class="row">
                <div class="form-group col-md-12">
                  <mat-form-field *ngIf="chargingProfiles && chargingProfiles.length > 1">
                    <mat-select [formControl]="chargingProfilesControl" placeholder="{{'chargers.smart_charging.charging_profile_limit' | translate}}">
                      <mat-option *ngFor="let chargingProfile of chargingProfiles" [value]="chargingProfile.id">
                        {{'chargers.connector' | translate}} {{chargingProfile.connectorID}} ({{'chargers.smart_charging.stack_level' | translate}} {{chargingProfile.profile.stackLevel}})
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field>
                    <mat-select [formControl]="profileTypeControl"
                      placeholder="{{'chargers.smart_charging.profile_type' | translate}}" required>
                      <mat-option *ngFor="let type of profileTypeMap" [value]="type.key">
                        {{type.description | translate}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="form-group col-md-12">
                  <mat-form-field>
                    <mat-datetimepicker #picker type="datetime" openOnFocus="false" mode="portrait" timeInterval="1">
                    </mat-datetimepicker>
                    <mat-datetimepicker-toggle matSuffix [for]="picker" matSuffix></mat-datetimepicker-toggle>
                    <input matInput placeholder="{{'chargers.smart_charging.start_date' | translate}}" required
                      (dateChange)="startDateFilterChanged($event.value.toDate())" [matDatetimepicker]="picker" [value]="startSchedule"
                      [formControl]="startDateControl"
                      autocomplete="false">
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="text-right col-md-8 chart-position-in-pop-up">
              <app-charging-station-smart-charging-limit-planner-chart #limitChart>
              </app-charging-station-smart-charging-limit-planner-chart>
            </div>
          </div>
          <div class="limit-planner-table-postion">
            <app-table [dataSource]="slotTableDataSource"></app-table>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
