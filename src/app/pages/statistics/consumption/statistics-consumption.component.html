<div class="card">
    <div class="card-header card-icon">

        <h2 class="card-title" *ngIf=!selectedYear>{{'general.menu.consumption' | translate}}</h2>

        <mat-form-field>
            <mat-label>{{'statistics.transactions_years' | translate}}</mat-label>
                <mat-select [(value)]="selectedYear" (selectionChange)="setYear()">
                  <mat-option *ngFor="let year of transactionYears" [value]="year">{{year}}</mat-option>
                </mat-select>
              </mat-form-field>

        <span class="toolbar-spacer"></span>

        <h2 class="card-title" *ngIf=!!selectedYear>{{chartTitle}}</h2>


        <button mat-raised-button *ngIf=!!selectedYear 
            class="button-refresh" (click)="refresh()"
            appTooltip="" data-toggle="tooltip" data-placement="bottom" [title]="'general.refresh' | translate">
            <div *ngIf="ongoingRefresh" class="spinner-autorefresh2">
                <div class="loader"></div>
            </div>
            <div *ngIf="!ongoingRefresh" class="refresh-icon">
                <mat-icon>refresh</mat-icon>{{'general.refresh' | translate}}
            </div>    
        </button>

    </div>
        
    <div class="card-body"> 
        <canvas #consumptionBarChart></canvas>

        <button mat-raised-button *ngIf=!!selectedYear
            (click)="toggleHideBarItems()">
            {{'statistics.legend_select_unselect_all' | translate}}
        </button>
        <span class="toolbar-spacer"></span>

        <canvas #consumptionPieChart></canvas>

        <button mat-raised-button *ngIf=!!selectedYear
            (click)="toggleHidePieItems()">
            {{'statistics.legend_select_unselect_all' | translate}}
        </button>

    </div> 

</div>
