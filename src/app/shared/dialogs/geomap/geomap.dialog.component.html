<div class="row">
  <div class="col-md-8">
    <mat-form-field *ngIf="!displayOnly">
      <input ngx-google-places-autocomplete #placesRef="ngx-places" placeholder="{{'geomap.search' | translate}}" matInput (onAddressChange)="setAddress($event)">
    </mat-form-field>
    <h2 class="m-0" *ngIf="displayOnly">
      {{dialogTitle}}
    </h2>
  </div>
  <div class="col-md-4" align="right">
    <button class="btn btn-info btn-round mat-raised-button app-btn-min-width" (click)="minZoom()">
      <span class="mat-button-wrapper">
        <i class="material-icons mr-2">zoom_out</i>
        <span class="btn-label">{{'geomap.min_zoom'
          | translate}}</span>
      </span>
    </button>
    <button class="btn btn-info btn-round mat-raised-button app-btn-min-width" (click)="maxZoom()">
      <span class="mat-button-wrapper">
        <i class="material-icons mr-2">zoom_in</i>
        <span class="btn-label">{{'geomap.max_zoom'
          | translate}}</span>
      </span>
    </button>
  </div>
</div>

<div>
  <agm-map [streetViewControl]="false" [zoom]="zoom" [latitude]="mapLatitude" [longitude]="mapLongitude" (mapReady)="mapReady($event)" (mapTypeIdChange)="mapTypeIdChange($event)"
    (mapClick)="mapClick($event)" [disableDefaultUI]="true" [mapTypeControl]="true" class="app-shadow">
    <ng-container *ngIf="markers && markers.length > 0; else elseTemplate">
      <agm-marker *ngFor="let marker of markers" [latitude]="marker.latitude" [longitude]="marker.longitude" [label]="marker.labelFormatted" [markerDraggable]="true && !displayOnly" (dragEnd)="mapClick($event)" [iconUrl]="icon">
      </agm-marker>
    </ng-container>
    <ng-template #elseTemplate>
      <agm-marker [latitude]="markerLatitude" [longitude]="markerLongitude" [label]="labelFormatted" [markerDraggable]="true && !displayOnly" (dragEnd)="mapClick($event)" [iconUrl]="icon">
      </agm-marker>
    </ng-template>
  </agm-map>
</div>

<mat-dialog-actions align="end">
  <button class="mat-raised-button mat-primary" (click)="validate()">
    {{"general.ok" | translate}}
  </button>
  <button *ngIf="!displayOnly" class="mat-raised-button" (click)="cancel()" cdkFocusInitial>{{"general.cancel" | translate}}</button>
</mat-dialog-actions>